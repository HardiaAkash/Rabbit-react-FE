{"version":3,"file":"static/js/14.0d299927.chunk.js","mappings":"mMAwHA,QAlHA,WACE,MAAM,aAAEA,IAAiBC,EAAAA,EAAAA,YAAWC,EAAAA,IAC9B,cAAEC,IAAkBF,EAAAA,EAAAA,YAAWG,EAAAA,IAE/B,KAAEC,IAASC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,KACJF,IACFG,OAAOC,SAASC,KAAO,WACzB,GACC,CAACL,IAEJ,MAAOM,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,CAC7CC,MAAO,GACPC,SAAU,KAmDNC,EAAgBC,IACpB,MAAM,KAAEC,EAAI,MAAEC,GAAUF,EAAEG,OAE1BR,GAAgBS,IACdC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACKD,GAAS,IACZ,CAACH,GAAOC,KAEV,EAGJ,OACEI,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sBAAqBC,UAClCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,QAAOC,SAAA,EACpBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,0BAAyBC,SAAC,YACxCF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,OAAMC,SAAC,wCACpBC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,YAAYG,SAhEbC,UACnBX,EAAEY,iBAEF,IACE7B,EAAa,CAAE8B,KAAM,YACrB,MAAMC,QAAYC,MAAM,0CAA2C,CACjEC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU1B,KAGvBC,EAAe,CACb0B,SAAU,GACVxB,MAAO,GACPC,SAAU,KAGZ,MAAMwB,QAAeR,EAAIS,OAEzB,IAAKD,EAAOE,QACV,MAAM,IAAIC,MAAMH,EAAOI,OAGzBC,YAAW,KACTzC,EAAc,CACZ2B,KAAM,OACNe,QAAS,oBACTC,QAAS,YAGX9C,EAAa,CAAE8B,KAAM,SAAUe,QAASN,EAAOQ,OAC/CvC,OAAOC,SAASC,KAAO,UAAU,GAChC,KAEHsC,QAAQC,IAAIV,EACd,CAAE,MAAOW,GACP/C,EAAc,CACZ2B,KAAM,OACNe,QAASK,EAAIC,QACbL,QAAS,YAEX9C,EAAa,CAAE8B,KAAM,UACrBkB,QAAQC,IAAIC,EACd,GAmBuDzB,SAAA,EACjDF,EAAAA,EAAAA,KAAA,SACEC,UAAU,wHACVM,KAAK,QACLZ,KAAK,QACLkC,YAAY,gBACZjC,MAAOR,EAAYG,MACnBuC,SAAUrC,KAGZO,EAAAA,EAAAA,KAAA,SACEC,UAAU,wHACVM,KAAK,WACLZ,KAAK,WACLkC,YAAY,WACZjC,MAAOR,EAAYI,SACnBsC,SAAUrC,KAEZO,EAAAA,EAAAA,KAAA,UACEC,UAAU,kFACVM,KAAK,SAAQL,SACd,eAIHC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,OAAMC,SAAA,CAAC,OACfF,EAAAA,EAAAA,KAAC+B,EAAAA,GAAI,CAACC,GAAG,YAAW9B,SAAC,oBAKlC,C","sources":["pages/Login.jsx"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport { UserContext } from \"../context/UserContext\";\nimport { AlertContext } from \"../context/AlertContext\";\nimport { useAppState, useUser } from \"../hooks/Hooks\";\nimport { Link } from \"react-router-dom\";\n\nfunction Login() {\n  const { dispatchUser } = useContext(UserContext);\n  const { dispatchAlert } = useContext(AlertContext);\n\n  const { user } = useUser();\n\n  useEffect(() => {\n    if (user) {\n      window.location.href = \"/profile\";\n    }\n  }, [user]);\n\n  const [userDetails, setUserDetails] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      dispatchUser({ type: \"LOADING\" });\n      const res = await fetch(\"http://localhost:5000/api/v1/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(userDetails),\n      });\n\n      setUserDetails({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n      });\n\n      const result = await res.json();\n\n      if (!result.success) {\n        throw new Error(result.error);\n      }\n\n      setTimeout(() => {\n        dispatchAlert({\n          type: \"SHOW\",\n          payload: \"Log in successful\",\n          variant: \"Success\",\n        });\n        \n        dispatchUser({ type: \"LOG_IN\", payload: result.data });\n        window.location.href = \"/profile\";\n      }, 3000);\n\n      console.log(result);\n    } catch (err) {\n      dispatchAlert({\n        type: \"SHOW\",\n        payload: err.message,\n        variant: \"Warning\",\n      });\n      dispatchUser({ type: \"ERROR\" });\n      console.log(err);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    setUserDetails((prevState) => {\n      return {\n        ...prevState,\n        [name]: value,\n      };\n    });\n  };\n\n  return (\n    <div className=\"flex justify-center\">\n      <div className=\"mt-20\">\n        <h1 className=\"font-bold text-3xl mb-5\">Log in</h1>\n        <p className=\"mb-8\">Enter your details below to log in</p>\n        <form className=\"space-y-3\" onSubmit={handleSubmit}>\n          <input\n            className=\"block py-2 px-5 rounded-lg border-2 border-slate-400 focus:border-purple-700 outline-none transition-all duration-200\"\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email address\"\n            value={userDetails.email}\n            onChange={handleChange}\n          />\n\n          <input\n            className=\"block py-2 px-5 rounded-lg border-2 border-slate-400 focus:border-purple-700 outline-none transition-all duration-200\"\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Password\"\n            value={userDetails.password}\n            onChange={handleChange}\n          />\n          <button\n            className=\"block w-full bg-purple-700 text-white font-medium text-lg py-2 px-5 rounded-3xl\"\n            type=\"submit\"\n          >\n            Log in\n          </button>\n        </form>\n        <p className=\"mt-5\">\n          Or <Link to=\"/register\">Register</Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"names":["dispatchUser","useContext","UserContext","dispatchAlert","AlertContext","user","useUser","useEffect","window","location","href","userDetails","setUserDetails","useState","email","password","handleChange","e","name","value","target","prevState","_objectSpread","_jsx","className","children","_jsxs","onSubmit","async","preventDefault","type","res","fetch","method","headers","body","JSON","stringify","username","result","json","success","Error","error","setTimeout","payload","variant","data","console","log","err","message","placeholder","onChange","Link","to"],"sourceRoot":""}