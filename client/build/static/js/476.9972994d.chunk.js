"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[476],{3476:(e,o,t)=>{t.r(o),t.d(o,{default:()=>r});var l=t(9379),s=t(5043),n=t(6580),a=t(49),c=t(579);const r=function(){const{username:e}=(0,n.g)(),{user:o,dispatchUser:t}=(0,a.Jd)(),[r,i]=(0,s.useState)(null),[d,h]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(async()=>{t({type:"LOADING"});try{const t=await fetch("http://localhost:5000/api/v1/users/".concat(e),{method:"GET",headers:{Accept:"application/json"}}),l=await t.json();if(404===t.status)window.location.href="/404";else{if(!l.success)throw new Error(l.error);o.username===l.data.username?window.location.href="/profile":i(l.data)}}catch(d){h(!0),console.log("Error getting single user",d)}finally{t({type:"ERROR"})}})()}),[]),d?(0,c.jsx)("p",{className:"mt-20 text-center",children:"Something went wrong. Try again later."}):o&&(0,c.jsxs)("div",{className:"space-y-3 mt-20",children:[(0,c.jsx)("div",{className:"h-20 w-20 rounded-full bg-gray-500 mx-auto"}),(0,c.jsxs)("div",{className:"flex justify-center gap-2 items-center",children:[(0,c.jsx)("p",{className:"text-center font-semibold text-xl",children:null===r||void 0===r?void 0:r.username})," ",null!==r&&void 0!==r&&r.followers.includes(o.id)?(0,c.jsx)("button",{onClick:async()=>{const t=JSON.parse(localStorage.getItem("user")).token;try{if(!(await fetch("http://localhost:5000/api/v1/users/".concat(e,"/follow"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}})).ok)throw new Error("Couldn't perform actionr");i((e=>(0,l.A)((0,l.A)({},e),{},{followers:e.followers.filter((e=>e!==o.id))})))}catch(s){console.log(d)}},className:"p-2 bg-gray-300 rounded-lg",children:"Following"}):(0,c.jsx)("button",{onClick:async()=>{const t=JSON.parse(localStorage.getItem("user")).token;try{const s=await fetch("http://localhost:5000/api/v1/users/".concat(e,"/follow"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}}),n=await s.json();if(console.log(n),!s.ok)throw new Error("Couldn't perform action");i((e=>(0,l.A)((0,l.A)({},e),{},{followers:[...e.followers,null===o||void 0===o?void 0:o.id]}))),console.log(null===o||void 0===o?void 0:o.id)}catch(s){console.log(d)}},className:"p-2 bg-gray-300 rounded-lg",children:"Follow"})]}),(0,c.jsxs)("div",{className:"flex gap-3 justify-center font-semibold text-xl",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,c.jsx)("span",{children:null===r||void 0===r?void 0:r.followers.length}),(0,c.jsx)("span",{children:"Followers"})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,c.jsx)("span",{children:null===r||void 0===r?void 0:r.following.length}),(0,c.jsx)("span",{children:"Following"})]})]})]})}}}]);
//# sourceMappingURL=476.9972994d.chunk.js.map